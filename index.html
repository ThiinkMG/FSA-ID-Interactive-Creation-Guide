<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FSA ID Creation Guide - My College Finance</title>
    <style>
        /* MCF CSS Variables - ALWAYS INCLUDE */
        :root {
            --mcf-brand-blue: #012699;
            --mcf-brand-green: #26e011;
            --mcf-brand-amber: #fdc003;
            --mcf-brand-black: #000516;
            --mcf-background: #fafafa;
            --mcf-foreground: #09090b;
            --mcf-card: #ffffff;
            --mcf-card-foreground: #09090b;
            --mcf-popover: #ffffff;
            --mcf-popover-foreground: #09090b;
            --mcf-primary: #336bff;
            --mcf-primary-foreground: #f8fafc;
            --mcf-secondary: #f1f5f9;
            --mcf-secondary-foreground: #64748b;
            --mcf-muted: #f1f5f9;
            --mcf-muted-foreground: #64748b;
            --mcf-accent: #f1f5f9;
            --mcf-accent-foreground: #64748b;
            --mcf-destructive: #ef4444;
            --mcf-destructive-foreground: #f8fafc;
            --mcf-border: #e2e8f0;
            --mcf-input: #e2e8f0;
            --mcf-ring: #09090b;
            --mcf-radius: 0.5rem;
            --mcf-transition: all 0.3s ease;
        }

        /* Dark Mode Color Scheme */
        body.dark-mode {
            --mcf-background: #09090b;
            --mcf-foreground: #ffffff;
            --mcf-card: #1a1a1f;
            --mcf-card-foreground: #ffffff;
            --mcf-popover: #09090b;
            --mcf-popover-foreground: #ffffff;
            --mcf-primary: #4c6ef5;
            --mcf-primary-foreground: #ffffff;
            --mcf-secondary: #374151;
            --mcf-secondary-foreground: #ffffff;
            --mcf-muted: #1c1917;
            --mcf-muted-foreground: #e2e8f0;
            --mcf-accent: #374151;
            --mcf-accent-foreground: #ffffff;
            --mcf-destructive: #ef4444;
            --mcf-destructive-foreground: #ffffff;
            --mcf-border: #374151;
            --mcf-input: #1f2937;
            --mcf-ring: #ffffff;
            --mcf-brand-blue: #3b82f6;
            --mcf-brand-green: #22c55e;
            --mcf-brand-amber: #f59e0b;
            --mcf-brand-black: #ffffff;
        }

        /* System font stack */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
                         'Helvetica Neue', Arial, sans-serif;
            font-size: 16px;
            line-height: 1.5;
            font-weight: 400;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            background-color: var(--mcf-background);
            color: var(--mcf-foreground);
            transition: var(--mcf-transition);
        }

        /* Container */
        .mcf-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }

        /* Header */
        .mcf-header {
            text-align: center;
            margin-bottom: 3rem;
            padding-bottom: 2rem;
            border-bottom: 2px solid var(--mcf-border);
            position: relative;
        }

        .mcf-logo {
            width: 100px;
            height: 100px;
            object-fit: contain;
            margin: 0 auto 1.5rem;
            display: block;
        }

        .mcf-brand-name {
            font-size: 1.5rem;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--mcf-brand-blue);
            margin-bottom: 0.5rem;
        }

        .mcf-tagline {
            font-size: 0.75rem;
            font-weight: 500;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            color: var(--mcf-muted-foreground);
        }

        .mcf-title {
            font-size: 2.25rem;
            font-weight: 900;
            line-height: 1.2;
            letter-spacing: -0.02em;
            margin: 1.5rem 0 1rem;
            background: linear-gradient(135deg, var(--mcf-brand-blue), var(--mcf-primary));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .mcf-subtitle {
            font-size: 1.125rem;
            color: var(--mcf-muted-foreground);
            margin-bottom: 1rem;
        }

        /* Dark Mode Toggle */
        .mcf-theme-toggle {
            position: absolute;
            top: 0;
            right: 0;
            width: 44px;
            height: 44px;
            padding: 0;
            border: 2px solid var(--mcf-border);
            background: var(--mcf-card);
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--mcf-transition);
            color: var(--mcf-foreground);
        }

        .mcf-theme-toggle:hover {
            border-color: var(--mcf-primary);
            transform: scale(1.1);
        }

        .mcf-sun-icon,
        .mcf-moon-icon {
            position: absolute;
            transition: opacity 0.3s ease;
        }

        /* Navigation Tabs */
        .nav-tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            border-bottom: 2px solid var(--mcf-border);
            flex-wrap: wrap;
        }

        .nav-tab {
            padding: 1rem 1.5rem;
            background: transparent;
            border: none;
            border-bottom: 3px solid transparent;
            color: var(--mcf-muted-foreground);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--mcf-transition);
            font-family: inherit;
        }

        .nav-tab:hover {
            color: var(--mcf-brand-blue);
            background: rgba(51, 107, 255, 0.05);
        }

        .nav-tab.active {
            color: var(--mcf-brand-blue);
            border-bottom-color: var(--mcf-brand-blue);
            background: rgba(51, 107, 255, 0.1);
        }

        /* Tab Content */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Section Cards */
        .section-card {
            background: var(--mcf-card);
            border: 2px solid var(--mcf-border);
            border-radius: calc(var(--mcf-radius) * 1.5);
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            color: var(--mcf-brand-blue);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Checklist Items */
        .checklist {
            list-style: none;
            padding: 0;
        }

        .checklist-item {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            padding: 1rem;
            margin-bottom: 0.5rem;
            background: var(--mcf-background);
            border: 1px solid var(--mcf-border);
            border-radius: var(--mcf-radius);
            transition: var(--mcf-transition);
        }

        .checklist-item:hover {
            border-color: var(--mcf-brand-blue);
            transform: translateY(-1px);
        }

        .checklist-item.completed {
            background: rgba(38, 224, 17, 0.05);
            border-color: var(--mcf-brand-green);
        }

        .checklist-checkbox {
            width: 1.5rem;
            height: 1.5rem;
            border: 2px solid var(--mcf-input);
            border-radius: calc(var(--mcf-radius) * 0.5);
            appearance: none;
            cursor: pointer;
            transition: var(--mcf-transition);
            position: relative;
            flex-shrink: 0;
        }

        .checklist-checkbox:checked {
            background-color: var(--mcf-brand-green);
            border-color: var(--mcf-brand-green);
        }

        .checklist-checkbox:checked::after {
            content: "✓";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 0.875rem;
            font-weight: bold;
        }

        .checklist-content {
            flex: 1;
        }

        .checklist-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--mcf-foreground);
        }

        .checklist-description {
            color: var(--mcf-muted-foreground);
            line-height: 1.6;
        }

        /* Flowchart */
        .flowchart-container {
            background: var(--mcf-background);
            border: 2px solid var(--mcf-border);
            border-radius: var(--mcf-radius);
            padding: 2rem;
            margin: 2rem 0;
            overflow-x: auto;
        }

        .flowchart-step {
            background: var(--mcf-card);
            border: 2px solid var(--mcf-border);
            border-radius: var(--mcf-radius);
            padding: 1.5rem;
            margin: 1rem 0;
            position: relative;
            transition: var(--mcf-transition);
        }

        .flowchart-step:hover {
            border-color: var(--mcf-brand-blue);
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .flowchart-step.decision {
            border-color: var(--mcf-brand-amber);
            background: rgba(253, 192, 3, 0.05);
        }

        .flowchart-step.solution {
            border-color: var(--mcf-brand-green);
            background: rgba(38, 224, 17, 0.05);
        }

        .flowchart-step.error {
            border-color: var(--mcf-destructive);
            background: rgba(239, 68, 68, 0.05);
        }

        .flowchart-title {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--mcf-foreground);
        }

        .flowchart-description {
            color: var(--mcf-muted-foreground);
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .flowchart-actions {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .flowchart-btn {
            padding: 0.5rem 1rem;
            border: 2px solid var(--mcf-border);
            background: var(--mcf-background);
            color: var(--mcf-foreground);
            border-radius: var(--mcf-radius);
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--mcf-transition);
        }

        .flowchart-btn:hover {
            border-color: var(--mcf-primary);
            background: rgba(51, 107, 255, 0.1);
        }

        .flowchart-btn.selected {
            background: var(--mcf-primary);
            color: var(--mcf-primary-foreground);
            border-color: var(--mcf-primary);
        }

        /* Security Tips */
        .security-tips {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }

        .security-tip {
            background: var(--mcf-background);
            border: 1px solid var(--mcf-border);
            border-radius: var(--mcf-radius);
            padding: 1.5rem;
            transition: var(--mcf-transition);
        }

        .security-tip:hover {
            border-color: var(--mcf-brand-blue);
            transform: translateY(-2px);
        }

        .security-tip-icon {
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        .security-tip-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--mcf-foreground);
        }

        .security-tip-description {
            color: var(--mcf-muted-foreground);
            line-height: 1.6;
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 2rem;
            flex-wrap: wrap;
        }

        .mcf-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            font-weight: 600;
            border-radius: var(--mcf-radius);
            transition: var(--mcf-transition);
            cursor: pointer;
            border: none;
            text-decoration: none;
            font-family: inherit;
            gap: 0.5rem;
        }

        .mcf-btn-primary {
            background-color: var(--mcf-primary);
            color: var(--mcf-primary-foreground);
        }

        .mcf-btn-primary:hover {
            background-color: var(--mcf-brand-blue);
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .mcf-btn-success {
            background-color: var(--mcf-brand-green);
            color: var(--mcf-brand-black);
        }

        .mcf-btn-success:hover {
            background-color: #1fb80d;
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(38, 224, 17, 0.2);
        }

        .mcf-btn-outline {
            background-color: transparent;
            border: 2px solid var(--mcf-border);
            color: var(--mcf-foreground);
        }

        .mcf-btn-outline:hover {
            border-color: var(--mcf-primary);
            background-color: rgba(51, 107, 255, 0.05);
        }

        /* Footer */
        .mcf-footer {
            text-align: center;
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid var(--mcf-border);
        }

        .mcf-footer-links {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
            margin-bottom: 1rem;
        }

        .mcf-footer-link {
            color: var(--mcf-muted-foreground);
            text-decoration: none;
            font-size: 0.875rem;
            transition: color 0.3s ease;
        }

        .mcf-footer-link:hover {
            color: var(--mcf-brand-blue);
            text-decoration: underline;
        }

        .mcf-copyright {
            font-size: 0.75rem;
            color: var(--mcf-muted-foreground);
        }

        /* Resource Links Styling */
        .resource-link {
            color: var(--mcf-foreground);
            text-decoration: none;
            padding: 0.75rem;
            border-radius: var(--mcf-radius);
            background: rgba(51, 107, 255, 0.05);
            transition: var(--mcf-transition);
            display: block;
            border: 1px solid transparent;
        }

        .resource-link:hover {
            background: rgba(51, 107, 255, 0.1);
            border-color: var(--mcf-primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .resource-link strong {
            color: var(--mcf-brand-blue);
            display: block;
            margin-bottom: 0.25rem;
        }

        .resource-link small {
            color: var(--mcf-muted-foreground);
            line-height: 1.4;
        }

        /* Resource Categories */
        .resource-category {
            background: var(--mcf-background);
            border-radius: var(--mcf-radius);
            padding: 1.5rem;
            transition: var(--mcf-transition);
        }

        .resource-category:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .resource-category h3 {
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Help Section Styling */
        .help-section {
            margin-top: 2rem;
            padding: 1.5rem;
            background: linear-gradient(135deg, rgba(51, 107, 255, 0.05) 0%, rgba(38, 224, 17, 0.05) 100%);
            border: 1px solid var(--mcf-border);
            border-radius: var(--mcf-radius);
        }

        .help-item {
            text-align: center;
            padding: 1rem;
            transition: var(--mcf-transition);
        }

        .help-item:hover {
            transform: scale(1.05);
        }

        .help-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .mcf-title {
                font-size: 1.75rem;
            }

            .nav-tabs {
                flex-direction: column;
            }

            .nav-tab {
                text-align: left;
            }

            .security-tips {
                grid-template-columns: 1fr;
            }

            .action-buttons {
                flex-direction: column;
            }

            .mcf-btn {
                width: 100%;
            }

            .resource-category {
                margin-bottom: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="mcf-container">
        <!-- Header -->
        <header class="mcf-header">
            <button id="mcf-theme-toggle" class="mcf-theme-toggle" aria-label="Toggle dark mode">
                <svg class="mcf-sun-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <circle cx="10" cy="10" r="4" fill="currentColor"/>
                    <path d="M10 0v4M10 16v4M20 10h-4M4 10H0M17.07 2.93l-2.83 2.83M5.76 14.24l-2.83 2.83M17.07 17.07l-2.83-2.83M5.76 5.76L2.93 2.93" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
                <svg class="mcf-moon-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" style="display:none;">
                    <path d="M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C10.3395 3 10.6734 3.02389 11 3.07039C9.27477 4.07544 8 5.8965 8 8C8 11.3137 10.6863 14 14 14C15.1035 14 16.0754 13.6238 16.9296 12.9998C16.9762 13.3266 17 13.6605 17 14Z" fill="currentColor"/>
                </svg>
            </button>

            <img src="https://static.wixstatic.com/media/c24a60_2b6231b666214539ae22ebd2dffe7a09~mv2.png" 
                 alt="My College Finance Logo" 
                 class="mcf-logo">
            <div class="mcf-brand-name">MY COLLEGE FINANCE</div>
            <div class="mcf-tagline">EDUCATE • MOTIVATE • ELEVATE</div>
            <h1 class="mcf-title">FSA ID Creation Guide</h1>
            <p class="mcf-subtitle">Step-by-step guide to creating your FSA ID with troubleshooting support</p>
        </header>

        <!-- Navigation Tabs -->
        <nav class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('overview')">📋 Overview</button>
            <button class="nav-tab" onclick="showTab('checklist')">✅ Creation Checklist</button>
            <button class="nav-tab" onclick="showTab('troubleshooting')">🔧 Troubleshooting</button>
            <button class="nav-tab" onclick="showTab('security')">🔒 Security Tips</button>
        </nav>

        <!-- Overview Tab -->
        <div id="overview" class="tab-content active">
            <div class="section-card">
                <h2 class="section-title">🎯 What is an FSA ID?</h2>
                <p>An FSA ID is a username and password that gives you access to Federal Student Aid's online systems. It's your digital signature for federal student aid and is required to:</p>
                <ul style="margin: 1rem 0; padding-left: 2rem;">
                    <li>Complete the FAFSA form</li>
                    <li>Sign your Master Promissory Note (MPN)</li>
                    <li>Access your federal student aid information</li>
                    <li>Complete entrance counseling</li>
                    <li>Apply for federal student loans</li>
                </ul>
            </div>

            <div class="section-card">
                <h2 class="section-title">👥 Who Needs an FSA ID?</h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem;">
                    <div style="background: var(--mcf-background); padding: 1.5rem; border-radius: var(--mcf-radius); border: 1px solid var(--mcf-border);">
                        <h3 style="color: var(--mcf-brand-blue); margin-bottom: 0.5rem;">Students</h3>
                        <p style="color: var(--mcf-muted-foreground);">All students applying for federal financial aid must have their own FSA ID.</p>
                    </div>
                    <div style="background: var(--mcf-background); padding: 1.5rem; border-radius: var(--mcf-radius); border: 1px solid var(--mcf-border);">
                        <h3 style="color: var(--mcf-brand-blue); margin-bottom: 0.5rem;">Parents</h3>
                        <p style="color: var(--mcf-muted-foreground);">Parents of dependent students need their own FSA ID to sign the FAFSA.</p>
                    </div>
                    <div style="background: var(--mcf-background); padding: 1.5rem; border-radius: var(--mcf-radius); border: 1px solid var(--mcf-border);">
                        <h3 style="color: var(--mcf-brand-blue); margin-bottom: 0.5rem;">Spouses</h3>
                        <p style="color: var(--mcf-muted-foreground);">Married students may need their spouse's FSA ID for certain applications.</p>
                    </div>
                </div>
            </div>

            <div class="section-card">
                <h2 class="section-title">⚠️ Common FSA ID Creation Errors</h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                    <div style="background: rgba(239, 68, 68, 0.05); padding: 1rem; border-radius: var(--mcf-radius); border-left: 4px solid var(--mcf-destructive);">
                        <h4 style="color: var(--mcf-destructive); margin-bottom: 0.5rem;">❌ Using Nicknames</h4>
                        <p style="font-size: 0.875rem; color: var(--mcf-muted-foreground);">Use your legal name exactly as it appears on your Social Security card.</p>
                    </div>
                    <div style="background: rgba(239, 68, 68, 0.05); padding: 1rem; border-radius: var(--mcf-radius); border-left: 4px solid var(--mcf-destructive);">
                        <h4 style="color: var(--mcf-destructive); margin-bottom: 0.5rem;">❌ Wrong SSN Format</h4>
                        <p style="font-size: 0.875rem; color: var(--mcf-muted-foreground);">Enter SSN without dashes or spaces (123456789, not 123-45-6789).</p>
                    </div>
                    <div style="background: rgba(239, 68, 68, 0.05); padding: 1rem; border-radius: var(--mcf-radius); border-left: 4px solid var(--mcf-destructive);">
                        <h4 style="color: var(--mcf-destructive); margin-bottom: 0.5rem;">❌ Weak Passwords</h4>
                        <p style="font-size: 0.875rem; color: var(--mcf-muted-foreground);">Use a strong password with at least 8 characters, including numbers and symbols.</p>
                    </div>
                    <div style="background: rgba(239, 68, 68, 0.05); padding: 1rem; border-radius: var(--mcf-radius); border-left: 4px solid var(--mcf-destructive);">
                        <h4 style="color: var(--mcf-destructive); margin-bottom: 0.5rem;">❌ Duplicate Email</h4>
                        <p style="font-size: 0.875rem; color: var(--mcf-muted-foreground);">Each FSA ID must have a unique email address.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Checklist Tab -->
        <div id="checklist" class="tab-content">
            <div class="section-card">
                <h2 class="section-title">📝 FSA ID Creation Checklist</h2>
                <p style="margin-bottom: 2rem; color: var(--mcf-muted-foreground);">Follow this step-by-step checklist to create your FSA ID successfully. Check off each item as you complete it.</p>
                
                <ul class="checklist" id="creation-checklist">
                    <!-- Checklist items will be populated by JavaScript -->
                </ul>
            </div>
        </div>

        <!-- Troubleshooting Tab -->
        <div id="troubleshooting" class="tab-content">
            <div class="section-card">
                <h2 class="section-title">🔧 FSA ID Troubleshooting Flowchart</h2>
                <p style="margin-bottom: 2rem; color: var(--mcf-muted-foreground);">Having trouble with your FSA ID? Use this interactive flowchart to find solutions to common problems.</p>
                
                <div class="flowchart-container" id="troubleshooting-flowchart">
                    <!-- Flowchart will be populated by JavaScript -->
                </div>
            </div>

            <div class="section-card">
                <h2 class="section-title">📚 FAFSA Troubleshooting Resources</h2>
                <p style="margin-bottom: 2rem; color: var(--mcf-muted-foreground);">Comprehensive guides and articles to help you resolve FAFSA-related issues and understand the application process.</p>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 1.5rem;">
                    <!-- Official Federal Resources -->
                    <div class="resource-category" style="border: 2px solid var(--mcf-brand-blue);">
                        <h3 style="color: var(--mcf-brand-blue);">
                            🏛️ Official Federal Resources
                        </h3>
                        <div style="display: flex; flex-direction: column; gap: 0.75rem;">
                            <a href="https://studentaid.gov/articles/" target="_blank" class="resource-link">
                                <strong>Federal Student Aid Articles</strong>
                                <small>Official troubleshooting guides and tips from the U.S. Department of Education</small>
                            </a>
                            <a href="https://fsapartners.ed.gov/knowledge-center/topics" target="_blank" class="resource-link">
                                <strong>FAFSA Simplification Information</strong>
                                <small>Latest changes and updates to the FAFSA process</small>
                            </a>
                            <a href="https://www.ed.gov/higher-education/paying-college/better-fafsa-what-students-and-their-families-need-know" target="_blank" class="resource-link">
                                <strong>The Better FAFSA Guide</strong>
                                <small>What students and families need to know about the improved FAFSA</small>
                            </a>
                        </div>
                    </div>

                    <!-- Common Issues & Solutions -->
                    <div class="resource-category" style="border: 2px solid var(--mcf-brand-green);">
                        <h3 style="color: var(--mcf-brand-green);">
                            🔍 Common Issues & Solutions
                        </h3>
                        <div style="display: flex; flex-direction: column; gap: 0.75rem;">
                            <a href="https://www.ed.gov/laws-and-policy/higher-education-laws-and-policy/fafsa-simplification-questions-and-answers" target="_blank" class="resource-link">
                                <strong>FAFSA Q&A</strong>
                                <small>Detailed answers to frequently asked questions about FAFSA simplification</small>
                            </a>
                            <a href="https://www.edvisors.com/student-loans/fafsa/all-articles/" target="_blank" class="resource-link">
                                <strong>Edvisors FAFSA Articles</strong>
                                <small>Comprehensive articles on dependency status, eligibility, and application tips</small>
                            </a>
                            <a href="https://financialaidtoolkit.ed.gov/tk/outreach/articles.jsp" target="_blank" class="resource-link">
                                <strong>Financial Aid Toolkit</strong>
                                <small>Articles and resources for students and families</small>
                            </a>
                        </div>
                    </div>

                    <!-- Professional Guidance -->
                    <div class="resource-category" style="border: 2px solid var(--mcf-brand-amber);">
                        <h3 style="color: var(--mcf-brand-amber);">
                            🎓 Professional Guidance
                        </h3>
                        <div style="display: flex; flex-direction: column; gap: 0.75rem;">
                            <a href="https://www.nasfaa.org/news-item/32252/2023_Year_in_Review_NASFAA_s_10_Most_Popular_Original_Articles" target="_blank" class="resource-link">
                                <strong>NASFAA Popular Articles</strong>
                                <small>Most popular articles from financial aid administrators</small>
                            </a>
                            <a href="https://www.insidehighered.com/news/student-success/college-experience/2024/10/08/five-ways-colleges-help-students-complete-fafsa" target="_blank" class="resource-link">
                                <strong>College FAFSA Assistance</strong>
                                <small>How colleges help students complete the FAFSA</small>
                            </a>
                            <a href="https://www.pbs.org/newshour/education/why-students-applying-for-college-financial-aid-are-facing-new-technical-hurdles" target="_blank" class="resource-link">
                                <strong>Technical Hurdles Guide</strong>
                                <small>Understanding and overcoming technical challenges</small>
                            </a>
                        </div>
                    </div>

                    <!-- Quick Reference -->
                    <div class="resource-category" style="border: 2px solid var(--mcf-destructive);">
                        <h3 style="color: var(--mcf-destructive);">
                            ⚡ Quick Reference
                        </h3>
                        <div style="display: flex; flex-direction: column; gap: 0.75rem;">
                            <div style="padding: 0.75rem; border-radius: var(--mcf-radius); background: rgba(239, 68, 68, 0.05); border: 1px solid rgba(239, 68, 68, 0.2);">
                                <strong style="color: var(--mcf-destructive);">Common FAFSA Errors:</strong>
                                <ul style="margin: 0.5rem 0 0 1rem; color: var(--mcf-muted-foreground); font-size: 0.875rem;">
                                    <li>Incorrect Social Security Number</li>
                                    <li>Wrong name format</li>
                                    <li>Missing required fields</li>
                                    <li>Invalid email addresses</li>
                                </ul>
                            </div>
                            <div style="padding: 0.75rem; border-radius: var(--mcf-radius); background: rgba(239, 68, 68, 0.05); border: 1px solid rgba(239, 68, 68, 0.2);">
                                <strong style="color: var(--mcf-destructive);">Technical Issues:</strong>
                                <ul style="margin: 0.5rem 0 0 1rem; color: var(--mcf-muted-foreground); font-size: 0.875rem;">
                                    <li>Browser compatibility problems</li>
                                    <li>Session timeouts</li>
                                    <li>Data retrieval tool issues</li>
                                    <li>Form submission errors</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Additional Help Section -->
                <div class="help-section">
                    <h3 style="color: var(--mcf-brand-blue); margin-bottom: 1rem;">🆘 Still Need Help?</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                        <div class="help-item">
                            <div class="help-icon">📞</div>
                            <strong>Federal Student Aid Information Center</strong><br>
                            <small style="color: var(--mcf-muted-foreground);">1-800-4-FED-AID (1-800-433-3243)</small>
                        </div>
                        <div class="help-item">
                            <div class="help-icon">💬</div>
                            <strong>Live Chat Support</strong><br>
                            <small style="color: var(--mcf-muted-foreground);">Available on studentaid.gov</small>
                        </div>
                        <div class="help-item">
                            <div class="help-icon">🏫</div>
                            <strong>College Financial Aid Office</strong><br>
                            <small style="color: var(--mcf-muted-foreground);">Contact your school's aid office</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Security Tab -->
        <div id="security" class="tab-content">
            <div class="section-card">
                <h2 class="section-title">🔒 FSA ID Security Best Practices</h2>
                <p style="margin-bottom: 2rem; color: var(--mcf-muted-foreground);">Protect your FSA ID with these essential security practices.</p>
                
                <div class="security-tips" id="security-tips">
                    <!-- Security tips will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <button class="mcf-btn mcf-btn-primary" onclick="saveAndDownload()">
                📥 Save & Download PDF
            </button>
            <button class="mcf-btn mcf-btn-success" onclick="downloadChecklist()">
                📋 Download Checklist
            </button>
            <button class="mcf-btn mcf-btn-outline" onclick="downloadTemplate()">
                📄 Download Template
            </button>
        </div>

        <!-- Footer -->
        <footer class="mcf-footer">
            <div class="mcf-footer-links">
                <a href="https://www.mycollegefinance.com/" target="_blank" class="mcf-footer-link">Main Website</a>
                <span>•</span>
                <a href="https://www.mycollegefinance.com/privacy-policy" target="_blank" class="mcf-footer-link">Privacy Policy</a>
                <span>•</span>
                <a href="https://www.mycollegefinance.com/terms-policy" target="_blank" class="mcf-footer-link">Terms of Service</a>
                <span>•</span>
                <a href="https://linktr.ee/mycollegefinance" target="_blank" class="mcf-footer-link">Social Media</a>
            </div>
            <p class="mcf-copyright">© 2025 My College Finance. All rights reserved.</p>
        </footer>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" 
            onerror="this.onerror=null; this.src='https://unpkg.com/jspdf@2.5.1/dist/jspdf.umd.min.js';"></script>
    <script>
        // Wait for jsPDF to load
        function waitForJsPDF(callback, maxAttempts = 50) {
            let attempts = 0;
            const checkJsPDF = () => {
                attempts++;
                if (typeof window.jspdf !== 'undefined') {
                    callback();
                } else if (attempts < maxAttempts) {
                    setTimeout(checkJsPDF, 100);
                } else {
                    console.error('jsPDF failed to load after', maxAttempts, 'attempts');
                    alert('PDF library failed to load. Please refresh the page and try again.');
                }
            };
            checkJsPDF();
        }
    </script>
    <script>
        // FSA ID Creation Checklist Data
        const checklistData = [
            {
                id: 1,
                title: "Gather Required Information",
                description: "Collect your Social Security Number, full legal name, date of birth, and a valid email address."
            },
            {
                id: 2,
                title: "Choose a Strong Username",
                description: "Select a username that's easy to remember but unique. It will be your login for all federal student aid systems."
            },
            {
                id: 3,
                title: "Create a Secure Password",
                description: "Use at least 8 characters with a mix of letters, numbers, and symbols. Avoid personal information."
            },
            {
                id: 4,
                title: "Verify Email Address",
                description: "Use an email address you check regularly. You'll receive important notifications here."
            },
            {
                id: 5,
                title: "Set Up Challenge Questions",
                description: "Choose questions and answers that only you would know. These help recover your account if needed."
            },
            {
                id: 6,
                title: "Review Personal Information",
                description: "Double-check that your name matches your Social Security card exactly."
            },
            {
                id: 7,
                title: "Submit and Verify",
                description: "Submit your application and check your email for verification instructions."
            },
            {
                id: 8,
                title: "Test Your FSA ID",
                description: "Log in to fafsa.gov to ensure everything works correctly before using it for applications."
            }
        ];

        // Troubleshooting Flowchart Data
        const troubleshootingData = {
            start: {
                id: 'start',
                title: 'FSA ID Problem',
                description: 'What issue are you experiencing with your FSA ID?',
                type: 'decision',
                options: [
                    { text: 'Cannot create account', next: 'creation-issues' },
                    { text: 'Cannot log in', next: 'login-issues' },
                    { text: 'Forgot username/password', next: 'recovery-issues' },
                    { text: 'Account locked', next: 'lockout-issues' }
                ]
            },
            'creation-issues': {
                id: 'creation-issues',
                title: 'Account Creation Issues',
                description: 'Common problems when creating an FSA ID:',
                type: 'solution',
                solutions: [
                    'Ensure your name matches your Social Security card exactly',
                    'Use a unique email address (not already used for another FSA ID)',
                    'Enter SSN without dashes or spaces (123456789)',
                    'Choose a strong password with at least 8 characters',
                    'Wait 24 hours if you recently created an account'
                ]
            },
            'login-issues': {
                id: 'login-issues',
                title: 'Login Problems',
                description: 'Troubleshooting login issues:',
                type: 'solution',
                solutions: [
                    'Check that Caps Lock is off',
                    'Clear your browser cache and cookies',
                    'Try a different browser or incognito mode',
                    'Ensure you\'re using the correct username (not email)',
                    'Wait 15 minutes if you\'ve made multiple failed attempts'
                ]
            },
            'recovery-issues': {
                id: 'recovery-issues',
                title: 'Account Recovery',
                description: 'To recover your FSA ID:',
                type: 'solution',
                solutions: [
                    'Use the "Forgot Username" link on the login page',
                    'Use the "Forgot Password" link if you know your username',
                    'Answer your challenge questions correctly',
                    'Check your email for recovery instructions',
                    'Contact Federal Student Aid if challenge questions don\'t work'
                ]
            },
            'lockout-issues': {
                id: 'lockout-issues',
                title: 'Account Locked',
                description: 'If your account is locked:',
                type: 'solution',
                solutions: [
                    'Wait 15 minutes before trying again',
                    'Use the account recovery process',
                    'Contact Federal Student Aid support',
                    'Verify your identity with required documents',
                    'Consider creating a new FSA ID if recovery fails'
                ]
            }
        };

        // Security Tips Data
        const securityTipsData = [
            {
                icon: '🔐',
                title: 'Strong Password',
                description: 'Use a unique password with at least 8 characters, including uppercase, lowercase, numbers, and symbols.'
            },
            {
                icon: '📧',
                title: 'Secure Email',
                description: 'Use a personal email address that only you can access. Avoid shared family email accounts.'
            },
            {
                icon: '🔒',
                title: 'Two-Factor Authentication',
                description: 'Enable two-factor authentication if available to add an extra layer of security to your account.'
            },
            {
                icon: '❓',
                title: 'Challenge Questions',
                description: 'Choose challenge questions with answers that are memorable to you but not easily guessable by others.'
            },
            {
                icon: '🚫',
                title: 'Never Share Credentials',
                description: 'Never share your FSA ID username or password with anyone, including family members or financial aid staff.'
            },
            {
                icon: '🔄',
                title: 'Regular Updates',
                description: 'Update your password regularly and keep your contact information current in your account settings.'
            }
        ];

        // Application State
        let appState = {
            completedChecklist: [],
            currentFlowchartStep: 'start',
            selectedOptions: {}
        };

        // Initialize the application
        function initializeApp() {
            loadSavedState();
            renderChecklist();
            renderTroubleshootingFlowchart();
            renderSecurityTips();
            updateChecklistProgress();
        }

        // Tab Navigation
        function showTab(tabId) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all tabs
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab content
            document.getElementById(tabId).classList.add('active');
            
            // Add active class to clicked tab
            event.target.classList.add('active');
        }

        // Render Checklist
        function renderChecklist() {
            const checklistContainer = document.getElementById('creation-checklist');
            checklistContainer.innerHTML = '';
            
            checklistData.forEach(item => {
                const listItem = document.createElement('li');
                listItem.className = 'checklist-item';
                if (appState.completedChecklist.includes(item.id)) {
                    listItem.classList.add('completed');
                }
                
                listItem.innerHTML = `
                    <input type="checkbox" 
                           class="checklist-checkbox" 
                           id="checklist-${item.id}"
                           ${appState.completedChecklist.includes(item.id) ? 'checked' : ''}
                           onchange="toggleChecklistItem(${item.id})">
                    <div class="checklist-content">
                        <div class="checklist-title">${item.title}</div>
                        <div class="checklist-description">${item.description}</div>
                    </div>
                `;
                
                checklistContainer.appendChild(listItem);
            });
        }

        // Toggle Checklist Item
        function toggleChecklistItem(itemId) {
            if (appState.completedChecklist.includes(itemId)) {
                appState.completedChecklist = appState.completedChecklist.filter(id => id !== itemId);
            } else {
                appState.completedChecklist.push(itemId);
            }
            
            updateChecklistProgress();
            saveState();
        }

        // Update Checklist Progress
        function updateChecklistProgress() {
            const totalItems = checklistData.length;
            const completedItems = appState.completedChecklist.length;
            const progress = Math.round((completedItems / totalItems) * 100);
            
            // Update checklist items appearance
            document.querySelectorAll('.checklist-item').forEach((item, index) => {
                const itemId = index + 1;
                if (appState.completedChecklist.includes(itemId)) {
                    item.classList.add('completed');
                } else {
                    item.classList.remove('completed');
                }
            });
        }

        // Render Troubleshooting Flowchart
        function renderTroubleshootingFlowchart() {
            const flowchartContainer = document.getElementById('troubleshooting-flowchart');
            flowchartContainer.innerHTML = '';
            
            const currentStep = troubleshootingData[appState.currentFlowchartStep];
            
            const stepElement = document.createElement('div');
            stepElement.className = `flowchart-step ${currentStep.type}`;
            
            let optionsHtml = '';
            if (currentStep.options) {
                optionsHtml = `
                    <div class="flowchart-actions">
                        ${currentStep.options.map(option => 
                            `<button class="flowchart-btn" onclick="selectFlowchartOption('${option.next}')">${option.text}</button>`
                        ).join('')}
                    </div>
                `;
            } else if (currentStep.solutions) {
                optionsHtml = `
                    <div style="margin-top: 1rem;">
                        <h4 style="color: var(--mcf-brand-green); margin-bottom: 0.5rem;">💡 Solutions:</h4>
                        <ul style="margin-left: 1.5rem; color: var(--mcf-muted-foreground);">
                            ${currentStep.solutions.map(solution => `<li>${solution}</li>`).join('')}
                        </ul>
                    </div>
                    <div class="flowchart-actions" style="margin-top: 1rem;">
                        <button class="flowchart-btn" onclick="resetFlowchart()">🔄 Start Over</button>
                    </div>
                `;
            }
            
            stepElement.innerHTML = `
                <div class="flowchart-title">${currentStep.title}</div>
                <div class="flowchart-description">${currentStep.description}</div>
                ${optionsHtml}
            `;
            
            flowchartContainer.appendChild(stepElement);
        }

        // Select Flowchart Option
        function selectFlowchartOption(nextStep) {
            appState.currentFlowchartStep = nextStep;
            renderTroubleshootingFlowchart();
            saveState();
        }

        // Reset Flowchart
        function resetFlowchart() {
            appState.currentFlowchartStep = 'start';
            renderTroubleshootingFlowchart();
            saveState();
        }

        // Render Security Tips
        function renderSecurityTips() {
            const tipsContainer = document.getElementById('security-tips');
            tipsContainer.innerHTML = '';
            
            securityTipsData.forEach(tip => {
                const tipElement = document.createElement('div');
                tipElement.className = 'security-tip';
                
                tipElement.innerHTML = `
                    <div class="security-tip-icon">${tip.icon}</div>
                    <div class="security-tip-title">${tip.title}</div>
                    <div class="security-tip-description">${tip.description}</div>
                `;
                
                tipsContainer.appendChild(tipElement);
            });
        }

        // Save and Download PDF
        function saveAndDownload() {
            waitForJsPDF(() => {
                try {
                    const { jsPDF } = window.jspdf;
                    const doc = new jsPDF();
                    
                    // Add MCF branding
                    doc.setFontSize(20);
                    doc.setTextColor(1, 38, 153);
                    doc.text('MY COLLEGE FINANCE', 105, 20, { align: 'center' });
                    
                    doc.setFontSize(10);
                    doc.setTextColor(100, 116, 139);
                    doc.text('EDUCATE • MOTIVATE • ELEVATE', 105, 28, { align: 'center' });
                    
                    // Add title
                    doc.setFontSize(16);
                    doc.setTextColor(0, 0, 0);
                    doc.text('FSA ID Creation Guide', 105, 45, { align: 'center' });
                    
                    doc.setFontSize(10);
                    doc.text(`Generated: ${new Date().toLocaleDateString()}`, 105, 55, { align: 'center' });
                    
                    // Add checklist
                    let yPos = 70;
                    doc.setFontSize(14);
                    doc.setTextColor(0, 0, 0);
                    doc.text('FSA ID Creation Checklist:', 20, yPos);
                    yPos += 15;
                    
                    checklistData.forEach((item, index) => {
                        if (yPos > 250) {
                            doc.addPage();
                            yPos = 20;
                        }
                        
                        const isCompleted = appState.completedChecklist.includes(item.id);
                        const status = isCompleted ? '✓' : '☐';
                        
                        doc.setFontSize(10);
                        doc.text(`${status} ${item.title}`, 20, yPos);
                        doc.text(`   ${item.description}`, 20, yPos + 8);
                        yPos += 20;
                    });
                    
                    // Add troubleshooting section
                    if (yPos > 200) {
                        doc.addPage();
                        yPos = 20;
                    }
                    
                    doc.setFontSize(14);
                    doc.text('Troubleshooting Guide:', 20, yPos);
                    yPos += 15;
                    
                    Object.values(troubleshootingData).forEach(step => {
                        if (yPos > 250) {
                            doc.addPage();
                            yPos = 20;
                        }
                        
                        doc.setFontSize(12);
                        doc.setTextColor(0, 0, 0);
                        doc.text(step.title, 20, yPos);
                        yPos += 8;
                        
                        doc.setFontSize(10);
                        doc.setTextColor(100, 100, 100);
                        doc.text(step.description, 20, yPos);
                        yPos += 12;
                        
                        if (step.solutions) {
                            step.solutions.forEach(solution => {
                                doc.text(`• ${solution}`, 25, yPos);
                                yPos += 8;
                            });
                        }
                        yPos += 10;
                    });
                    
                    // Add footer
                    doc.setFontSize(8);
                    doc.setTextColor(100, 100, 100);
                    doc.text('© 2025 My College Finance. All rights reserved.', 105, 285, { align: 'center' });
                    
                    // Save the PDF
                    doc.save('MCF-FSA-ID-Creation-Guide.pdf');
                } catch (error) {
                    console.error('Error generating PDF:', error);
                    alert('Error generating PDF. Please try again.');
                }
            });
        }

        // Download Checklist
        function downloadChecklist() {
            waitForJsPDF(() => {
                try {
                    const { jsPDF } = window.jspdf;
                    const doc = new jsPDF();
                    
                    // Add MCF branding
                    doc.setFontSize(20);
                    doc.setTextColor(1, 38, 153);
                    doc.text('MY COLLEGE FINANCE', 105, 20, { align: 'center' });
                    
                    doc.setFontSize(10);
                    doc.setTextColor(100, 116, 139);
                    doc.text('EDUCATE • MOTIVATE • ELEVATE', 105, 28, { align: 'center' });
                    
                    // Add title
                    doc.setFontSize(16);
                    doc.setTextColor(0, 0, 0);
                    doc.text('FSA ID Creation Checklist', 105, 45, { align: 'center' });
                    
                    doc.setFontSize(10);
                    doc.text('Name: _______________________  Date: ___________', 20, 60);
                    
                    // Add instructions
                    doc.setFontSize(12);
                    doc.text('Instructions: Check off each item as you complete it', 20, 75);
                    
                    // Add checklist items
                    let yPos = 90;
                    checklistData.forEach((item, index) => {
                        doc.setFontSize(10);
                        doc.text(`☐ ${item.title}`, 20, yPos);
                        doc.text(`   ${item.description}`, 30, yPos + 8);
                        yPos += 20;
                    });
                    
                    // Add footer
                    doc.setFontSize(8);
                    doc.setTextColor(100, 100, 100);
                    doc.text('© 2025 My College Finance. All rights reserved.', 105, 285, { align: 'center' });
                    
                    // Save the PDF
                    doc.save('MCF-FSA-ID-Creation-Checklist.pdf');
                } catch (error) {
                    console.error('Error generating checklist PDF:', error);
                    alert('Error generating checklist PDF. Please try again.');
                }
            });
        }

        // Download Template
        function downloadTemplate() {
            waitForJsPDF(() => {
                try {
                    const { jsPDF } = window.jspdf;
                    const doc = new jsPDF();
                    
                    // Add MCF branding
                    doc.setFontSize(20);
                    doc.setTextColor(1, 38, 153);
                    doc.text('MY COLLEGE FINANCE', 105, 20, { align: 'center' });
                    
                    doc.setFontSize(10);
                    doc.setTextColor(100, 116, 139);
                    doc.text('EDUCATE • MOTIVATE • ELEVATE', 105, 28, { align: 'center' });
                    
                    // Add title
                    doc.setFontSize(16);
                    doc.setTextColor(0, 0, 0);
                    doc.text('FSA ID Creation Template', 105, 45, { align: 'center' });
                    
                    doc.setFontSize(10);
                    doc.text('Name: _______________________  Date: ___________', 20, 60);
                    
                    // Add template sections
                    let yPos = 80;
                    
                    // Personal Information Section
                    doc.setFontSize(12);
                    doc.text('Personal Information:', 20, yPos);
                    yPos += 15;
                    
                    doc.setFontSize(10);
                    doc.text('Full Legal Name: _________________________________', 20, yPos);
                    yPos += 10;
                    doc.text('Social Security Number: _________________________', 20, yPos);
                    yPos += 10;
                    doc.text('Date of Birth: _________________________________', 20, yPos);
                    yPos += 10;
                    doc.text('Email Address: _________________________________', 20, yPos);
                    yPos += 20;
                    
                    // FSA ID Information Section
                    doc.setFontSize(12);
                    doc.text('FSA ID Information:', 20, yPos);
                    yPos += 15;
                    
                    doc.setFontSize(10);
                    doc.text('Username: _________________________________', 20, yPos);
                    yPos += 10;
                    doc.text('Password: _________________________________', 20, yPos);
                    yPos += 10;
                    doc.text('Challenge Question 1: _________________________', 20, yPos);
                    yPos += 10;
                    doc.text('Answer: _________________________________', 20, yPos);
                    yPos += 10;
                    doc.text('Challenge Question 2: _________________________', 20, yPos);
                    yPos += 10;
                    doc.text('Answer: _________________________________', 20, yPos);
                    yPos += 20;
                    
                    // Security Notes Section
                    doc.setFontSize(12);
                    doc.text('Security Notes:', 20, yPos);
                    yPos += 15;
                    
                    doc.setFontSize(10);
                    doc.text('• Keep your FSA ID credentials secure and private', 20, yPos);
                    yPos += 8;
                    doc.text('• Never share your username or password', 20, yPos);
                    yPos += 8;
                    doc.text('• Use a strong, unique password', 20, yPos);
                    yPos += 8;
                    doc.text('• Keep your contact information updated', 20, yPos);
                    
                    // Add footer
                    doc.setFontSize(8);
                    doc.setTextColor(100, 100, 100);
                    doc.text('© 2025 My College Finance. All rights reserved.', 105, 285, { align: 'center' });
                    
                    // Save the PDF
                    doc.save('MCF-FSA-ID-Creation-Template.pdf');
                } catch (error) {
                    console.error('Error generating template PDF:', error);
                    alert('Error generating template PDF. Please try again.');
                }
            });
        }

        // Save state to localStorage
        function saveState() {
            localStorage.setItem('mcf-fsa-id-state', JSON.stringify(appState));
        }

        // Load saved state
        function loadSavedState() {
            const saved = localStorage.getItem('mcf-fsa-id-state');
            if (saved) {
                const state = JSON.parse(saved);
                appState = { ...appState, ...state };
            }
        }

        // Dark mode implementation
        function initDarkMode() {
            const currentTheme = localStorage.getItem('mcf-theme') || 'light';
            if (currentTheme === 'dark') {
                document.body.classList.add('dark-mode');
                updateThemeIcon(true);
            }

            const toggleDarkMode = () => {
                const isDark = document.body.classList.toggle('dark-mode');
                localStorage.setItem('mcf-theme', isDark ? 'dark' : 'light');
                updateThemeIcon(isDark);
            };

            function updateThemeIcon(isDark) {
                const sunIcons = document.querySelectorAll('.mcf-sun-icon');
                const moonIcons = document.querySelectorAll('.mcf-moon-icon');
                
                sunIcons.forEach(icon => {
                    icon.style.display = isDark ? 'none' : 'block';
                });
                
                moonIcons.forEach(icon => {
                    icon.style.display = isDark ? 'block' : 'none';
                });
            }

            const toggleBtn = document.getElementById('mcf-theme-toggle');
            if (toggleBtn) {
                toggleBtn.addEventListener('click', toggleDarkMode);
            }
        }

        // Initialize everything when page loads
        document.addEventListener('DOMContentLoaded', () => {
            initDarkMode();
            initializeApp();
        });
    </script>
</body>
</html>
